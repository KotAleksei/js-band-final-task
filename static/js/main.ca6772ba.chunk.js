(this["webpackJsonpjs-band-final-task"]=this["webpackJsonpjs-band-final-task"]||[]).push([[0],{39:function(e,t,a){e.exports=a.p+"static/media/logo-image.22826269.png"},42:function(e,t,a){e.exports=a(74)},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),i=a(24),s=a(15),l=(a(51),a(3));var u=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"bg-secondary border-bottom "},r.a.createElement("h1",{className:"h2 text-left pt-3 pb-2 pl-5",style:{color:"white"}},"JS BAND STORE/ Aleksei Kotvitskyi")))},d=a(12),m=a(13),b=a(16),p=a(14),h=a(18),E=a(17),f=a(39),g=a.n(f),v=a(11),O=a.n(v);O.a.defaults.baseURL="https://js-band-api.glitch.me/";var k=function(e){return function(t){t({type:"SIGN_IN_REQUEST"}),function(e){return O.a.post("signin",e)}(e).then((function(e){var a=e.data;return t({type:"SIGN_IN_SUCCESS",payload:a})})).catch((function(e){return t({type:"SIGN_IN_ERROR",payload:e})}))}},y=function(){return r.a.createElement("div",{className:"loader mt-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},N=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(b.a)(this,Object(p.a)(t).call(this,e))).state={username:""},a.userNameInput=r.a.createRef(),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthentificated,a=e.history,n=this.userNameInput.current;n.addEventListener("invalid",(function(){n.setCustomValidity("Field is not valid")})),t&&a.replace("/books")}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isAuthentificated,a=e.history;t&&a.replace("/books")}},{key:"handleChange",value:function(e){var t=e.target.value.length>3;this.setState({username:e.target.value}),t?e.target.setCustomValidity(""):e.target.setCustomValidity("Field is not valid")}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.username;(0,this.props.signInCT)({username:t})}},{key:"render",value:function(){var e=this.props.isLoading;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(y,null):r.a.createElement("div",{className:"container d-flex justify-content-center"},r.a.createElement("div",{className:"container col-6 col-lg-4 text-center mt-5"},r.a.createElement("img",{className:"card-img-top rounded col-8",src:g.a,alt:"avatar"}),r.a.createElement("form",{className:"d-flex flex-column align-items-center",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"mt-3 col-11 font-weight-bold"},"Username",r.a.createElement("input",{type:"text",placeholder:"type Username",className:"form-control text-center",minLength:4,maxLength:16,ref:this.userNameInput,autoFocus:!0,required:!0,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-success mt-3 col-10 btn-submit"},r.a.createElement("span",{className:"signIn-content"},"Sign-In"))))))}}]),t}(r.a.Component),j=Object(s.b)((function(e){return{isAuthentificated:e.signInReducer.isAuthentificated,isLoading:e.signInReducer.isLoading}}),(function(e){return{signInCT:function(t){return e(k(t))}}}))(Object(l.g)(N)),S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(j,null))},R=a(2),_=a.n(R);O.a.defaults.baseURL="https://js-band-api.glitch.me/";var C=a(7),L={isAuthentificated:!!localStorage.getItem("token"),error:void 0,avatar:void 0,token:localStorage.getItem("token"),username:void 0,isLoading:!1},T=function(e){return e.signInReducer.token},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case"SIGN_IN_REQUEST":return Object(C.a)({},e,{isLoading:!0});case"SIGN_IN_SUCCESS":var n=t.payload,r=n.avatar,o=n.token,c=n.username;return localStorage.setItem("token",o),Object(C.a)({},e,{isAuthentificated:!0,avatar:r,token:o,username:c,isLoading:!1});case"SIGN_IN_ERROR":var i=t.payload;return Object(C.a)({},e,{isLoading:!1,error:i.error});default:return e}},B=function(){return function(e,t){var a=T(t());a&&(e({type:"GET_BOOKS_REQUEST"}),function(e){return O.a.get("books",{headers:{Authorization:"Bearer ".concat(e)}})}(a).then((function(t){var a=t.data;return e({type:"GET_BOOKS_SUCCES",payload:a})})).catch((function(t){var a=t.response.data;return e(function(e){return{type:"GET_BOOKS_ERROR",payload:e}}(a))})))}},x=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(b.a)(this,Object(p.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.history,a=e.book,n=e.match.path;t.push("".concat(n,"/").concat(a.id))}},{key:"render",value:function(){var e=this.props.book;return r.a.createElement("li",{className:"card booklist-item bg-light "},r.a.createElement("img",{src:e.cover,alt:e.title,className:"rounded mx-auto d-block book-img"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.author)),r.a.createElement("div",{className:"card-footer"},r.a.createElement("span",{className:"float-left book-price"},"Price: ",e.price,"$"),r.a.createElement("button",{type:"button",className:"btn btn-dark float-right",onClick:this.handleClick},"View")))}}]),t}(r.a.Component),U=Object(l.g)(x),G=function(e){function t(){return Object(d.a)(this,t),Object(b.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.books,a=e.getBooksCT;t||a()}},{key:"render",value:function(){var e=this.props,t=e.books,a=e.isLoading,n=e.error;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(y,null),n&&r.a.createElement("div",{className:"booklist-erroMessage"},"Oops... You should Authorize"),t&&r.a.createElement("ul",{className:"bookList"},t.map((function(e){return r.a.createElement(U,{key:e.id,book:e})}))))}}]),t}(r.a.Component);G.defaultProps={books:_.a.undefined,error:_.a.undefined};var K=Object(s.b)((function(e){return{books:e.booksReducer.books,isLoading:e.booksReducer.isLoading,error:e.booksReducer.error}}),(function(e){return{getBooksCT:function(){return e(B())}}}))(G),F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(K,null))};O.a.defaults.baseURL="https://js-band-api.glitch.me/";var A=function(e){return function(t,a){var n=T(a());n&&(t({type:"GET_BOOK_REQUEST"}),function(e,t){return O.a.get("books/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}})}(n,e).then((function(e){var a=e.data;return t({type:"GET_BOOK_SUCCES",payload:a})})).catch((function(e){var a=e.response.data;return t(function(e){return{type:"GET_BOOK_ERROR",payload:e}}(a))})))}},w=function(e){function t(){return Object(d.a)(this,t),Object(b.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id;(0,e.getBookCT)(t)}},{key:"componentWillUnmount",value:function(){(0,this.props.removeBookFromStoreCT)()}},{key:"render",value:function(){var e=this.props,t=e.book,a=e.isLoading;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(y,null),t&&r.a.createElement("div",{className:"card mb-3 col-6 mt-5 ml-5 bg-light"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"pl-3 pt-3 col-md-4"},r.a.createElement("img",{src:t.cover,className:"card-img",alt:t.title})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.title),r.a.createElement("p",{className:"card-text"},"Autor: ",t.author),r.a.createElement("p",{className:"card-text"},"Level: ",t.level),r.a.createElement("p",{className:"card-text"},"Tags: ",t.tags)))),r.a.createElement("div",{className:"card-footer mt-3"},t.description)))}}]),t}(r.a.Component);w.defaultProps={book:_.a.undefined};var M=Object(s.b)((function(e){return{book:e.bookReducer.book,isLoading:e.bookReducer.isLoading}}),(function(e){return{getBookCT:function(t){return e(A(t))},removeBookFromStoreCT:function(){return e({type:"REMOVE_BOOK_FROM_STORE"})}}}))(Object(l.g)(w)),D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(M,null))};function Q(){return r.a.createElement("h1",null,"Not Found...")}var V=function(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/"},r.a.createElement(l.a,{to:"/signin"})),r.a.createElement(l.b,{exact:!0,path:"/signin",component:S}),r.a.createElement(l.b,{exact:!0,path:"/books",component:F}),r.a.createElement(l.b,{exact:!0,path:"/books/:id",component:D}),r.a.createElement(l.b,{path:"*",component:Q}))},z=(a(70),a(71),a(72),a(73),a(19)),J=a(41),P={books:void 0,error:void 0,isLoading:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case"GET_BOOKS_REQUEST":return Object(C.a)({},e,{isLoading:!0});case"GET_BOOKS_SUCCES":return Object(C.a)({},e,{isLoading:!1,books:t.payload});case"GET_BOOKS_ERROR":return Object(C.a)({},e,{isLoading:!1,error:t.payload});default:return e}},W={book:void 0,error:void 0,isLoading:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case"GET_BOOK_REQUEST":return Object(C.a)({},e,{isLoading:!0});case"GET_BOOK_SUCCES":return Object(C.a)({},e,{isLoading:!1,book:t.payload});case"GET_BOOK_ERROR":return Object(C.a)({},e,{isLoading:!1,error:t.payload});case"REMOVE_BOOK_FROM_STORE":return Object(C.a)({},e,{book:void 0});default:return e}},$=Object(z.c)({signInReducer:I,booksReducer:q,bookReducer:Y}),H=Object(z.d)($,Object(z.a)(J.a));c.a.render(r.a.createElement(s.a,{store:H},r.a.createElement(i.a,{basename:"/"},r.a.createElement(V,null))),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ca6772ba.chunk.js.map